-- +goose Up
-- +goose StatementBegin

-- ---------------------------------
-- Seeder
-- ---------------------------------

INSERT INTO notification_categories (id, name, description, is_mandatory) VALUES
    (1, 'security', 'Password resets and login alerts', TRUE),
    (2, 'system', 'System messages and product updates', TRUE);

INSERT INTO notification_templates (id, trigger_key, category_id, channel, subject, body) VALUES
    (1, 'email_verify', 1, 2, 
    '[GoBite] Please verify your email',
    $$<!DOCTYPE html><html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:v="urn:schemas-microsoft-com:vml" xmlns:o="urn:schemas-microsoft-com:office:office"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="x-apple-disable-message-reformatting"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Verify your email</title><!--[if mso]><xml><o:officedocumentsettings><o:pixelsperinch>96</o:pixelsperinch></o:officedocumentsettings></xml><![endif]--><style>body,html{margin:0!important;padding:0!important;height:100%!important;width:100%!important;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;background:#f6f7fb;color:#111827}table,td{border-collapse:collapse!important;mso-table-lspace:0!important;mso-table-rspace:0!important}img{-ms-interpolation-mode:bicubic;border:0;outline:0;text-decoration:none;display:block}a{text-decoration:none}@media screen and (max-width:600px){.container{width:100%!important}.px{padding-left:20px!important;padding-right:20px!important}.btn-wrap{width:100%!important}.btn-wrap td{width:100%!important}.btn td{display:block!important;width:100%!important}.btn a{display:block!important;width:100%!important}.logo{max-width:180px!important;height:auto!important}}@media (prefers-color-scheme:dark){body{background:#0b1220!important;color:#e5e7eb!important}.card{background:#111827!important}.muted{color:#9ca3af!important}.divider{border-color:#243244!important}}</style></head><body><div style="display:none;font-size:1px;color:#f6f7fb;line-height:1px;max-height:0;max-width:0;opacity:0;overflow:hidden">Please verify your email address to finish setting up your account.</div><table role="presentation" width="100%" bgcolor="#f6f7fb" style="width:100%;background:#f6f7fb"><tr><td align="center" style="padding:40px 12px"><table role="presentation" class="container" width="600" style="width:600px;max-width:600px;border-radius:16px;overflow:hidden"><tr><td align="center" style="padding:22px 24px;background:#111827"><img class="logo" src="https://www.nicehash.com/static/header.png" width="200" alt="{{ .company_name }}" style="max-width:200px;width:100%;height:auto;display:block;margin:0 auto"></td></tr><tr><td class="card" bgcolor="#ffffff" style="background:#fff;padding:28px 32px" class="px"><h1 style="margin:0 0 12px;font-size:22px;line-height:1.3;color:#111827">Please verify your email</h1><p class="muted" style="margin:0 0 18px;font-size:15px;line-height:1.6;color:#4b5563">Thanks for signing up! Confirm your email address by clicking the button below. This helps us make sure it’s really you.</p><table role="presentation" border="0" cellpadding="0" cellspacing="0" width="100%" style="margin:22px 0"><tr><td align="left"><table role="presentation" border="0" cellpadding="0" cellspacing="0" class="btn-wrap" style="border-collapse:separate"><tr><td align="center" bgcolor="#2563eb" class="btn" style="border-radius:10px"><!--[if mso]><v:roundrect xmlns:v="urn:schemas-microsoft-com:vml" xmlns:w="urn:schemas-microsoft-com:office:word" href="{{ .verify_url }}" style="height:44px;v-text-anchor:middle;width:220px" arcsize="18%" stroke="f" fillcolor="#2563eb"><w:anchorlock><center style="color:#fff;font-family:Segoe UI,Arial,sans-serif;font-size:15px;font-weight:600">Verify Email</center></v:roundrect><![endif]--><!--[if !mso]><!-- --><a href="{{ .verify_url }}" target="_blank" style="font-size:15px;font-weight:600;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Arial,sans-serif;color:#fff;text-decoration:none;padding:12px 18px;border-radius:10px;display:inline-block;mso-padding-alt:0">Verify Email</a><!--<![endif]--></td></tr></table></td></tr></table><p class="muted" style="margin:0 0 8px;font-size:13px;line-height:1.6;color:#6b7280">If the button doesn’t work, copy and paste this link into your browser:</p><p style="margin:0 0 18px;font-size:13px;line-height:1.6;word-break:break-all"><a href="{{ .verify_url }}" style="color:#2563eb">{{ .verify_url }}</a></p><hr class="divider" style="border:none;border-top:1px solid #e5e7eb;margin:20px 0"><p class="muted" style="margin:0;font-size:12px;line-height:1.6;color:#6b7280">If you didn’t create an account, you can safely ignore this email.</p><p class="muted" style="margin:12px 0 0;font-size:12px;line-height:1.6;color:#6b7280">Need help? Contact us at <a href="mailto:{{ .support_email }}" style="color:#2563eb">{{ .support_email }}</a>.</p></td></tr><tr><td align="center" style="padding:18px 24px"><p class="muted" style="margin:0;font-size:12px;line-height:1.6;color:#9ca3af">© {{ .year }} {{ .company_name }}. All rights reserved.</p><p class="muted" style="margin:6px 0 0;font-size:12px;line-height:1.6;color:#9ca3af">{{ .company_address }}</p></td></tr></table></td></tr></table></body></html>$$
    ),

    (2, 'password_reset', 1, 2, 
    '[GoBite] Please reset your password', 
    $$<!DOCTYPE html><html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:v="urn:schemas-microsoft-com:vml" xmlns:o="urn:schemas-microsoft-com:office:office"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="x-apple-disable-message-reformatting"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Reset your password</title><!--[if mso]><xml><o:officedocumentsettings><o:pixelsperinch>96</o:pixelsperinch></o:officedocumentsettings></xml><![endif]--><style>body,html{margin:0!important;padding:0!important;height:100%!important;width:100%!important;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;background:#f6f7fb;color:#111827}table,td{border-collapse:collapse!important;mso-table-lspace:0!important;mso-table-rspace:0!important}img{-ms-interpolation-mode:bicubic;border:0;outline:0;text-decoration:none;display:block}a{text-decoration:none}@media screen and (max-width:600px){.container{width:100%!important}.px{padding-left:20px!important;padding-right:20px!important}.btn-wrap{width:100%!important}.btn-wrap td{width:100%!important}.btn td{display:block!important;width:100%!important}.btn a{display:block!important;width:100%!important}.logo{max-width:180px!important;height:auto!important}}@media (prefers-color-scheme:dark){body{background:#0b1220!important;color:#e5e7eb!important}.card{background:#111827!important}.muted{color:#9ca3af!important}.divider{border-color:#243244!important}}</style></head><body><div style="display:none;font-size:1px;color:#f6f7fb;line-height:1px;max-height:0;max-width:0;opacity:0;overflow:hidden">Reset your password to regain access to your account.</div><table role="presentation" width="100%" bgcolor="#f6f7fb" style="width:100%;background:#f6f7fb"><tr><td align="center" style="padding:40px 12px"><table role="presentation" class="container" width="600" style="width:600px;max-width:600px;border-radius:16px;overflow:hidden"><tr><td align="center" style="padding:22px 24px;background:#111827"><img src="https://www.nicehash.com/static/header.png" width="200" alt="{{.company_name}}" class="logo" style="max-width:200px;width:100%;height:auto;display:block;margin:0 auto"></td></tr><tr><td class="card" bgcolor="#ffffff" style="background:#fff;padding:28px 32px" class="px"><h1 style="margin:0 0 12px;font-size:22px;line-height:1.3;color:#111827">Reset your password</h1><p class="muted" style="margin:0 0 18px;font-size:15px;line-height:1.6;color:#4b5563">We received a request to reset your password. Click the button below to choose a new one.</p><table role="presentation" border="0" cellpadding="0" cellspacing="0" width="100%" style="margin:22px 0"><tr><td align="left"><table role="presentation" border="0" cellpadding="0" cellspacing="0" class="btn-wrap" style="border-collapse:separate"><tr><td align="center" bgcolor="#2563eb" class="btn" style="border-radius:10px"><!--[if mso]><v:roundrect xmlns:v="urn:schemas-microsoft-com:vml" xmlns:w="urn:schemas-microsoft-com:office:word" href="{{.reset_url}}" style="height:44px;v-text-anchor:middle;width:240px" arcsize="18%" stroke="f" fillcolor="#2563eb"><w:anchorlock><center style="color:#fff;font-family:Segoe UI,Arial,sans-serif;font-size:15px;font-weight:600">Reset Password</center></v:roundrect><![endif]--><!--[if !mso]><!-- --><a href="{{.reset_url}}" target="_blank" style="font-size:15px;font-weight:600;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Arial,sans-serif;color:#fff;text-decoration:none;padding:12px 18px;border-radius:10px;display:inline-block;mso-padding-alt:0">Reset Password</a><!--<![endif]--></td></tr></table></td></tr></table><p class="muted" style="margin:0 0 8px;font-size:13px;line-height:1.6;color:#6b7280">If the button doesn’t work, copy and paste this link into your browser:</p><p style="margin:0 0 18px;font-size:13px;line-height:1.6;word-break:break-all"><a href="{{.reset_url}}" style="color:#2563eb">{{.reset_url}}</a></p><hr class="divider" style="border:none;border-top:1px solid #e5e7eb;margin:20px 0"><p class="muted" style="margin:0;font-size:12px;line-height:1.6;color:#6b7280">If you didn’t request a password reset, you can safely ignore this email. Your password will not be changed.</p><p class="muted" style="margin:12px 0 0;font-size:12px;line-height:1.6;color:#6b7280">Need help? Contact us at <a href="mailto:{{.support_email}}" style="color:#2563eb">{{.support_email}}</a>.</p></td></tr><tr><td align="center" style="padding:18px 24px"><p class="muted" style="margin:0;font-size:12px;line-height:1.6;color:#9ca3af">© {{.year}} {{.company_name}}. All rights reserved.</p><p class="muted" style="margin:6px 0 0;font-size:12px;line-height:1.6;color:#9ca3af">{{.company_address}}</p></td></tr></table></td></tr></table></body></html>$$
    ),

    (3, 'user_welcome', 2, 1, 
    'Welcome to Gobite', 
    'Hi {{full_name}}, welcome aboard! Your account is ready — explore the app and start ordering your favorites.'
    );

-- +goose StatementEnd

-- +goose Down
-- +goose StatementBegin
DELETE FROM notification_templates WHERE id IN (1, 2, 3);
DELETE FROM notification_categories WHERE id IN (1, 2);
-- +goose StatementEnd
